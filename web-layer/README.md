## メモ

- Webサーバ：ブラウザやアプリからリクエストを受けて、HTMLやJSONをレスポンスとして返す
    - Lambdaでも作れる
    - Webサービスのユーザが常時接続するので、プライベートサブネットに置かないと大変なことになるし、リソースも利用者数に応じて適切なスペックを選ぶ必要がある
        - cf. 踏み台：インターネットから直接接続される、管理者が時々アクセスするだけ（リソース更新目的？）なので、スペックも低くていい
    - 外部からのアクセスは不要なので、パブリックIPの自動割り当ては「無効」にする
    - セキュリティグループ：default（VPC内の全てのリソースから通信を許可する設定）
- webサーバに接続するには多段接続をする
    - ~/.ssh/configファイルに以下のように書き込む

```bash
Host web01
  Hostname {webサーバのプライベートIP}
  User ec2-user　（ログインするユーザ名）
  IdentityFile ~/.ssh/{鍵のファイル}
  ProxyCommand ssh(.exe) bastion -W %h:%p #.exeはwindowsからの接続時のみに必要
  
# from ChatGPT
このコマンド(ProxyCommand)は、SSHを使用してリモートサーバーにアクセスする際に、バスチオンホスト（またはジャンプホスト）を経由して通信するための方法を指定しています。具体的には、ProxyCommandは、SSHがリモートホストに接続する際に使用するコマンドを指定するための設定です。ssh.exeはSSHクライアントプログラムです。bastionはバスチオンホストのホスト名やIPアドレスを表しています。-W %h:%pは、SSHがリモートホストに接続する際に、バスチオンホストを経由して通信することを指定します。%hはリモートホストのホスト名、%pはポート番号を表します。つまり、この設定は、リモートホストに直接接続する代わりに、バスチオンホストを介してリモートホストに接続する方法を指定しています。
```
